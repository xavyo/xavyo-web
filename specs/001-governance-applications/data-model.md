# Data Model: Governance Applications

## Entities

### Application

| Field | Type | Required | Notes |
|-------|------|----------|-------|
| id | UUID | read-only | Generated by backend |
| tenant_id | UUID | read-only | From session context |
| name | string (1-255) | yes | Must be non-empty |
| app_type | enum: internal, external | yes (create) | Set at creation, displayed read-only on edit |
| status | enum: active, inactive | yes (update) | Defaults to active on creation |
| description | string (0-2000) | no | Optional free text |
| owner_id | UUID | no | Omitted from UI forms (power-user feature) |
| external_id | string (0-255) | no | Optional external system reference |
| metadata | Record<string, unknown> | no | Omitted from UI forms (power-user feature) |
| is_delegable | boolean | no | Defaults to true |
| created_at | ISO 8601 datetime | read-only | Generated by backend |
| updated_at | ISO 8601 datetime | read-only | Generated by backend |

### Relationships

- **Application → Entitlements**: One-to-many. An application can have zero or more entitlements. Deletion is blocked (HTTP 412) when entitlements exist.

### State Transitions

```
[Created] → active
active ↔ inactive (via update)
active/inactive → [deleted] (only if no entitlements)
```

## TypeScript Types (to add)

### CreateApplicationRequest
```typescript
interface CreateApplicationRequest {
  name: string;
  app_type: 'internal' | 'external';
  description?: string;
  owner_id?: string;
  external_id?: string;
  metadata?: Record<string, unknown>;
  is_delegable?: boolean;
}
```

### UpdateApplicationRequest
```typescript
interface UpdateApplicationRequest {
  name?: string;
  status?: 'active' | 'inactive';
  description?: string;
  owner_id?: string;
  external_id?: string;
  metadata?: Record<string, unknown>;
  is_delegable?: boolean;
}
```

## Zod Schemas (to add)

### createApplicationSchema
- name: string, min(1), max(255), required
- app_type: enum ['internal', 'external'], required
- description: string, max(2000), optional
- external_id: string, max(255), optional
- is_delegable: boolean, optional, default(true)

### updateApplicationSchema
- name: string, min(1), max(255), optional
- status: enum ['active', 'inactive'], optional
- description: string, max(2000), optional
- external_id: string, max(255), optional
- is_delegable: boolean, optional
